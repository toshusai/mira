(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{233:function(e,r,t){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var s,i=1,r=arguments.length;i<r;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e}).apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.readPattern=r.readColor=r.readSection=r.readDataRLE=r.readPsd=r.checkSignature=r.skipBytes=r.readAsciiString=r.readUnicodeStringWithLength=r.readUnicodeString=r.readPascalString=r.readSignature=r.readBytes=r.readFixedPointPath32=r.readFixedPoint32=r.readFloat64=r.readFloat32=r.readUint32=r.readInt32LE=r.readInt32=r.readUint16=r.readInt16=r.peekUint8=r.readUint8=r.createReader=r.supportedColorModes=void 0;var n=t(232),f=t(238),d=t(242);r.supportedColorModes=[0,1,3];var c=["bitmap","grayscale","indexed","RGB","CMYK","multichannel","duotone","lab"];function l(data){for(var e=data.width*data.height*4,i=0;i<e;i+=4)data.data[i+1]=data.data[i],data.data[i+2]=data.data[i]}function v(e){return e.offset+=1,e.view.getUint8(e.offset-1)}function h(e){return e.view.getUint8(e.offset)}function w(e){return e.offset+=2,e.view.getInt16(e.offset-2,!1)}function m(e){return e.offset+=2,e.view.getUint16(e.offset-2,!1)}function y(e){return e.offset+=4,e.view.getInt32(e.offset-4,!1)}function I(e){return e.offset+=4,e.view.getUint32(e.offset-4,!1)}function M(e){return e.offset+=8,e.view.getFloat64(e.offset-8,!1)}function D(e,r){return e.offset+=r,new Uint8Array(e.view.buffer,e.view.byteOffset+e.offset-r,r)}function E(e){return F(e,4)}function S(e,r){for(var t=v(e),text=t?F(e,t):"";++t%r;)e.offset++;return text}function C(e){return U(e,I(e))}function U(e,r){for(var text="";r--;){var t=m(e);(t||r>0)&&(text+=String.fromCharCode(t))}return text}function A(e,r){e.offset+=r}function k(e,a,b){var r=e.offset,t=E(e);if(t!==a&&t!==b)throw new Error("Invalid signature: '"+t+"' at 0x"+r.toString(16))}function F(e,r){for(var t=D(e,r),o="",i=0;i<t.length;i++)o+=String.fromCharCode(t[i]);return o}function R(e,r,t){var o={};o.top=y(e),o.left=y(e),o.bottom=y(e),o.right=y(e);for(var f=m(e),d=[],i=0;i<f;i++){var c=w(e),l=I(e);if(t.large){if(0!==l)throw new Error("Sizes larger than 4GB are not supported");l=I(e)}d.push({id:c,length:l})}k(e,"8BIM");var h=E(e);if(!n.toBlendMode[h])throw new Error("Invalid blend mode: '"+h+"'");o.blendMode=n.toBlendMode[h],o.opacity=v(e)/255,o.clipping=1===v(e);var D=v(e);return o.transparencyProtected=0!=(1&D),o.hidden=0!=(2&D),A(e,1),O(e,1,(function(n){var mask=function(e,r){return O(e,1,(function(t){if(t()){var mask={};mask.top=y(e),mask.left=y(e),mask.bottom=y(e),mask.right=y(e),mask.defaultColor=v(e);var o=v(e);if(mask.positionRelativeToLayer=0!=(1&o),mask.disabled=0!=(2&o),mask.fromVectorData=0!=(8&o),16&o){var n=v(e);1&n&&(mask.userMaskDensity=v(e)/255),2&n&&(mask.userMaskFeather=M(e)),4&n&&(mask.vectorMaskDensity=v(e)/255),8&n&&(mask.vectorMaskFeather=M(e))}return t()>2&&(r.logMissingFeatures&&console.log("Unhandled extra mask params"),v(e),v(e),y(e),y(e),y(e),y(e)),A(e,t()),mask}}))}(e,t);for(mask&&(o.mask=mask),function(e){O(e,1,(function(r){for(var t=I(e),o=I(e),n=[];r();){var f=I(e),d=I(e);n.push({sourceRange:f,destRange:d})}return{compositeGrayBlendSource:t,compositeGraphBlendDestinationRange:o,ranges:n}}))}(e),o.name=S(e,4);n();)P(e,o,r,t)})),{layer:o,channels:d}}function x(e,r,t,o,f){var d,c=(t.right||0)-(t.left||0),v=(t.bottom||0)-(t.top||0);c&&v&&(d=n.createImageData(c,v),n.resetImageData(d)),n.RAW_IMAGE_DATA&&(t.imageDataRaw=[]);for(var h=0,w=o;h<w.length;h++){var y=w[h],I=m(e);if(-2===y.id){var mask=t.mask;if(!mask)throw new Error("Missing layer mask data");var M=(mask.right||0)-(mask.left||0),D=(mask.bottom||0)-(mask.top||0);if(M&&D){var E=n.createImageData(M,D);n.resetImageData(E);var S=e.offset;B(e,E,I,M,D,0,f.large),n.RAW_IMAGE_DATA&&(t.maskDataRaw=new Uint8Array(e.view.buffer,e.view.byteOffset+S,e.offset-S)),l(E),f.useImageData?mask.imageData=E:(mask.canvas=n.createCanvas(M,D),mask.canvas.getContext("2d").putImageData(E,0,0))}}else{var C=n.offsetForChannel(y.id),U=d;if(C<0&&(U=void 0,f.throwForMissingFeatures))throw new Error("Channel not supported: "+y.id);S=e.offset;B(e,U,I,c,v,C,f.large),n.RAW_IMAGE_DATA&&(t.imageDataRaw[y.id]=new Uint8Array(e.view.buffer,e.view.byteOffset+S,e.offset-S)),U&&1===r.colorMode&&l(U)}}d&&(f.useImageData?t.imageData=d:(t.canvas=n.createCanvas(c,v),t.canvas.getContext("2d").putImageData(d,0,0)))}function B(e,data,r,t,o,n,f){if(0===r)L(e,data,n,t,o);else{if(1!==r)throw new Error("Compression type not supported: "+r);_(e,data,t,o,4,[n],f)}}function P(e,r,t,o){var d=E(e);if("8BIM"!==d&&"8B64"!==d)throw new Error("Invalid signature: '"+d+"' at 0x"+(e.offset-4).toString(16));var c=E(e),l="8B64"===d||o.large&&-1!==n.largeAdditionalInfoKeys.indexOf(c);O(e,2,(function(n){var d=f.infoHandlersMap[c];if(d)try{d.read(e,r,n,t,o)}catch(e){if(o.throwForMissingFeatures)throw e}else o.logMissingFeatures&&console.log("Unhandled additional info: "+c),A(e,n());n()&&(o.logMissingFeatures&&console.log("Unread "+n()+" bytes left for additional info: "+c),A(e,n()))}),!1,l)}function L(e,r,t,o,n){var f=o*n,d=D(e,f);if(r&&t<4)for(var data=r.data,i=0,p=0|t;i<f;i++,p=p+4|0)data[p]=d[i]}function _(e,r,t,o,n,f,d){var c,data=r&&r.data;if(d){c=new Uint32Array(f.length*o);for(var l=0,li=0;l<f.length;l++)for(var v=0;v<o;v++,li++)c[li]=I(e)}else{c=new Uint16Array(f.length*o);for(l=0,li=0;l<f.length;l++)for(v=0;v<o;v++,li++)c[li]=m(e)}var h=0;for(li=0;h<f.length;h++){var w=0|f[h];if(!data||(h>3||w>3))for(v=0;v<o;v++,li++)A(e,c[li]);else{v=0;for(var p=0|w;v<o;v++,li++)for(var y=c[li],M=D(e,y),i=0;i<y;i++){var header=M[i];if(header>128){var E=M[++i];header=256-header|0;for(var S=0;S<=header;S=S+1|0)data[p]=E,p=p+n|0}else if(header<128)for(S=0;S<=header;S=S+1|0)data[p]=M[++i],p=p+n|0;if(i>=y)throw new Error("Invalid RLE data: exceeded buffer size "+i+"/"+y)}}}}function O(e,r,t,o,n){void 0===o&&(o=!0),void 0===n&&(n=!1);var f=I(e);if(n){if(0!==f)throw new Error("Sizes larger than 4GB are not supported");f=I(e)}if(!(f<=0&&o)){var d=e.offset+f,c=t((function(){return d-e.offset}));if(e.offset>d)throw new Error("Exceeded section limits");if(e.offset!==d)throw new Error("Unread section data: "+(d-e.offset)+" bytes at 0x"+e.offset.toString(16));for(;d%r;)d++;return e.offset=d,c}}r.createReader=function(e,r,t){return{view:new DataView(e,r,t),offset:0}},r.readUint8=v,r.peekUint8=h,r.readInt16=w,r.readUint16=m,r.readInt32=y,r.readInt32LE=function(e){return e.offset+=4,e.view.getInt32(e.offset-4,!0)},r.readUint32=I,r.readFloat32=function(e){return e.offset+=4,e.view.getFloat32(e.offset-4,!1)},r.readFloat64=M,r.readFixedPoint32=function(e){return y(e)/65536},r.readFixedPointPath32=function(e){return y(e)/(1<<24)},r.readBytes=D,r.readSignature=E,r.readPascalString=S,r.readUnicodeString=C,r.readUnicodeStringWithLength=U,r.readAsciiString=function(e,r){for(var text="";r--;)text+=String.fromCharCode(v(e));return text},r.skipBytes=A,r.checkSignature=k,r.readPsd=function(e,t){var f;void 0===t&&(t={}),k(e,"8BPS");var y=m(e);if(1!==y&&2!==y)throw new Error("Invalid PSD file version: "+y);A(e,6);var M=m(e),C=I(e),U=I(e),F=m(e),B=m(e);if(-1===r.supportedColorModes.indexOf(B))throw new Error("Color mode not supported: "+(null!==(f=c[B])&&void 0!==f?f:B));var G={width:U,height:C,channels:M,bitsPerChannel:F,colorMode:B},T=o(o({},t),{large:2===y});O(e,1,(function(r){if(T.throwForMissingFeatures)throw new Error("Color mode data not supported");A(e,r())})),O(e,1,(function(r){for(var t=function(){var r=E(e);if("8BIM"!==r&&"MeSa"!==r&&"AgHg"!==r&&"PHUT"!==r&&"DCSR"!==r)throw new Error("Invalid signature: '"+r+"' at 0x"+(e.offset-4).toString(16));var t=m(e);S(e,2),O(e,2,(function(r){var o=d.resourceHandlersMap[t],n=1036===t&&!!T.skipThumbnail;if(G.imageResources||(G.imageResources={}),o&&!n)try{o.read(e,G.imageResources,r,T)}catch(t){if(T.throwForMissingFeatures)throw t;A(e,r())}else A(e,r())}))};r();)t()}));var W=!1;O(e,1,(function(r){if(W=function(e,r,t){var o=!1;return O(e,2,(function(n){var f=w(e);f<0&&(o=!0,f=-f);for(var d=[],c=[],i=0;i<f;i++){var l=R(e,r,t),v=l.layer,h=l.channels;d.push(v),c.push(h)}if(!t.skipLayerImageData)for(i=0;i<f;i++)x(e,r,d[i],c[i],t);A(e,n()),r.children||(r.children=[]);var m=[r];for(i=d.length-1;i>=0;i--){var y=d[i],I=y.sectionDivider?y.sectionDivider.type:0;1===I||2===I?(y.opened=1===I,y.children=[],m[m.length-1].children.unshift(y),m.push(y)):3===I?m.pop():m[m.length-1].children.unshift(y)}}),void 0,t.large),o}(e,G,T),r()>0){var t=function(e){return O(e,1,(function(r){if(r()){var t=m(e),o=m(e),n=m(e),f=m(e),d=m(e),c=m(e)/255,l=v(e);return A(e,r()),{overlayColorSpace:t,colorSpace1:o,colorSpace2:n,colorSpace3:f,colorSpace4:d,opacity:c,kind:l}}}))}(e);t&&(G.globalLayerMaskInfo=t)}else A(e,r());for(;r()>0;){for(;r()&&0===h(e);)A(e,1);r()>=12?P(e,G,G,T):A(e,r())}}),void 0,T.large);var H=G.children&&G.children.length;return T.skipCompositeImageData&&(T.skipLayerImageData||H)||function(e,t,o,f){var d=m(e);if(-1===r.supportedColorModes.indexOf(t.colorMode))throw new Error("Color mode not supported: "+t.colorMode);if(0!==d&&1!==d)throw new Error("Compression type not supported: "+d);var c=n.createImageData(t.width,t.height);if(n.resetImageData(c),0===t.colorMode){var v=void 0;if(0===d)v=D(e,Math.ceil(t.width/8)*t.height);else{if(1!==d)throw new Error("Bitmap compression not supported: "+d);_(e,{data:v=new Uint8Array(t.width*t.height),width:t.width,height:t.height},t.width,t.height,1,[0],f.large)}n.decodeBitmap(v,c.data,t.width,t.height)}else{var h=1===t.colorMode?[0]:[0,1,2];if(t.channels&&t.channels>3)for(var i=3;i<t.channels;i++)h.push(i);else o&&h.push(3);if(0===d)for(i=0;i<h.length;i++)L(e,c,h[i],t.width,t.height);else if(1===d){var w=e.offset;_(e,c,t.width,t.height,4,h,f.large),n.RAW_IMAGE_DATA&&(t.imageDataRaw=new Uint8Array(e.view.buffer,e.view.byteOffset+w,e.offset-w))}1===t.colorMode&&l(c)}f.useImageData?t.imageData=c:(t.canvas=n.createCanvas(t.width,t.height),t.canvas.getContext("2d").putImageData(c,0,0))}(e,G,W,T),G},r.readDataRLE=_,r.readSection=O,r.readColor=function(e){switch(m(e)){case 0:var r=m(e)/257,g=m(e)/257,b=m(e)/257;return A(e,2),{r:r,g:g,b:b};case 1:var t=m(e)/65535,s=m(e)/65535;b=m(e)/65535;return A(e,2),{h:t,s:s,b:b};case 2:return{c:m(e)/257,m:m(e)/257,y:m(e)/257,k:d=m(e)/257};case 7:var o=w(e)/1e4,n=w(e),f=w(e),a=n<0?n/12800:n/12700;b=f<0?f/12800:f/12700;return A(e,2),{l:o,a:a,b:b};case 8:var d=255*m(e)/1e4;return A(e,6),{k:d};default:throw new Error("Invalid color space")}},r.readPattern=function(e){I(e);var r=I(e);if(1!==r)throw new Error("Invalid pattern version: "+r);var t=I(e),o=w(e),n=w(e);if(3!==t&&1!==t)throw new Error("Unsupported pattern color mode");var f=C(e),d=S(e,1),c=I(e);if(3!==c)throw new Error("Invalid pattern VMAL version: "+c);I(e);for(var l=I(e),h=I(e),y=I(e),M=I(e),E=I(e),U=M-h,A=y-l,data=new Uint8Array(U*A*4),i=3;i<data.byteLength;i+=4)data[i]=255;i=0;for(var k=0;i<E+2;i++){if(I(e)){var F=I(e),R=I(e),x=I(e),B=I(e),P=I(e),L=I(e),_=m(e),O=v(e),G=D(e,F-23);if(8!==R||8!==_)throw new Error("16bit pixel depth not supported for palettes");var T=L-B,W=P-x,H=B-h,j=x-l;if(0!==O)throw 1===O?new Error("Unsupported palette compression mode"):new Error("Invalid palette compression mode");if(3===t&&k<3)for(var z=0;z<W;z++)for(var V=0;V<T;V++){var J=V+z*T;data[(N=4*(H+V+(z+j)*U))+k]=G[J]}if(1===t&&k<1)for(var K=0;K<W;K++)for(var Y=0;Y<T;Y++){var N=4*(H+Y+(K+j)*U),Q=G[J=Y+K*T];data[N+0]=Q,data[N+1]=Q,data[N+2]=Q}k++}}return{id:d,name:f,x:o,y:n,bounds:{x:h,y:l,w:U,h:A},data:data}}}}]);