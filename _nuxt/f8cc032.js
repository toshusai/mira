(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{240:function(t,e,n){var content=n(258);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(24).default)("524e8706",content,!0,{sourceMap:!1})},248:function(t,e,n){var content=n(310);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(24).default)("45d20c4f",content,!0,{sourceMap:!1})},249:function(t,e,n){var content=n(312);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(24).default)("2c709312",content,!0,{sourceMap:!1})},257:function(t,e,n){"use strict";n(240)},258:function(t,e,n){var o=n(23)(!1);o.push([t.i,".log[data-v-6eb24336]{left:0;top:0;position:absolute;pointer-events:none}",""]),t.exports=o},309:function(t,e,n){"use strict";n(248)},310:function(t,e,n){var o=n(23)(!1);o.push([t.i,'.btn[data-v-4c8cd7c6]{margin:4px;height:24px;border:none;width:24px;background:#fff;border-radius:16px;cursor:pointer;position:relative}.btn-select[data-v-4c8cd7c6]:after{content:"";position:absolute;top:-4px;right:-4px;bottom:-4px;left:-4px;border-color:currentcolor;border-radius:16px;border-color:var(--spectrum-semantic-cta-background-color-default);border:2px solid var(--spectrum-actionbutton-m-emphasized-textonly-background-color-selected,var(--spectrum-semantic-cta-background-color-default))}',""]),t.exports=o},311:function(t,e,n){"use strict";n(249)},312:function(t,e,n){var o=n(23)(!1);o.push([t.i,".editor{height:100vh;max-height:-webkit-fill-available;min-width:100vw;overflow:hidden;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}",""]),t.exports=o},313:function(t,e,n){"use strict";n.r(e);n(228);var o=n(120),r=n(121),c=n(230),l=n(231),h=n(229),f=n(30),d=(n(61),n(38),n(1)),v=n(0),y=n(252),j=n.n(y),O=(n(253),n(91),n(31),n(256),n(169),function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(o.a)(this,t),this.x=e,this.y=n,this.z=r});function m(element,t,e){var n,o,r,rect=element.getBoundingClientRect(),c=rect.left,l=rect.top;if(e instanceof TouchEvent&&e.touches&&e.touches[0]&&void 0!==e.touches[0].force){if("stylus"!=e.touches[0].touchType)return{x:n,y:o,z:r};e.touches[0].force>0&&(r=e.touches[0].force),n=(e.touches[0].pageX-c)/t,o=(e.touches[0].pageY-l)/t}else e instanceof MouseEvent&&(r=1,n=(e.pageX-c)/t,o=(e.pageY-l)/t);return new O(n,o,r)}function x(a,b){return Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2))}function k(a,b){return Math.atan2(b.x-a.x,b.y-a.y)}var w,R=n(130),S=function t(){Object(o.a)(this,t),this.size=10,this.opacity=1,this.pressureSizeWeight=1,this.pressureOpacityWeight=1,this.color=new R.Color},_=function(){function t(){Object(o.a)(this,t),this.name="Layer",this.show=!1,this.opacity=1,this.children=[]}return Object(r.a)(t,[{key:"init",value:function(){this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}}]),t}();!function(t){t[t.Pencil=0]="Pencil",t[t.Eraser=1]="Eraser",t[t.Move=2]="Move",t[t.Pick=3]="Pick"}(w||(w={}));var P=function(){function t(){Object(o.a)(this,t),this.name="untitled",this.root={children:[]},this.width=512,this.height=512}return Object(r.a)(t,[{key:"resize",value:function(){var t=this;this.root.children.forEach((function(e){var n=e.ctx.getImageData(0,0,t.width,t.height);e.canvas.width=t.width,e.canvas.height=t.height,e.ctx.putImageData(n,0,0)}))}}]),t}(),E=function t(){Object(o.a)(this,t),this.size=10,this.opacity=1,this.pressureSizeWeight=1,this.pressureOpacityWeight=1},L=function(){function t(){Object(o.a)(this,t),this.undoStack=[],this.redoStack=[]}return Object(r.a)(t,[{key:"undoLength",get:function(){return this.undoStack.length}},{key:"redoLength",get:function(){return this.redoStack.length}},{key:"push",value:function(t){this.undoStack.push(t)}},{key:"pushRedo",value:function(t){this.redoStack.push(t)}},{key:"clearRedo",value:function(){this.redoStack=[]}},{key:"undo",value:function(){this.undoStack.length>0&&((0,this.undoStack[this.undoStack.length-1])(),this.undoStack.splice(this.undoStack.length-1,1))}},{key:"redo",value:function(){this.redoStack.length>0&&((0,this.redoStack[this.redoStack.length-1])(),this.redoStack.splice(this.redoStack.length-1,1))}}]),t}();function C(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Object(h.a)(t);if(e){var r=Object(h.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(l.a)(this,n)}}L.main=new L;var D=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},B=function(t){Object(c.a)(n,t);var e=C(n);function n(){var t;return Object(o.a)(this,n),(t=e.apply(this,arguments)).pageTop=0,t.pageLeft=0,t.scale=1,t.pos={x:100,y:100},t.base={x:0,y:0},t.baseScale=1,t.pinching=!1,t.prevTouchList=null,t.logs=[],t.isMousedown=!1,t.prevD=Number.NaN,t.doneFP=!1,t.tempCtx=null,t.prevPoint=null,t.stroke=[],t.history=[],t}return Object(r.a)(n,[{key:"width",get:function(){return this.project.width}},{key:"height",get:function(){return this.project.height}},{key:"ctx",get:function(){return this.tempCtx?this.tempCtx:this.currentLayer?this.currentLayer.ctx:void 0}},{key:"canvas",get:function(){if(this.currentLayer)return this.currentLayer.canvas}},{key:"style",get:function(){var t=this.pos.x,e=this.scale;return this.flipH&&(t=this.pos.x+this.width*this.scale,e=-e),{transform:"translate(".concat(t,"px, ").concat(this.pos.y,"px) scale(").concat(e,", ").concat(Math.abs(e),")"),transformOrigin:"top left",width:this.width+"px",height:this.height+"px"}}},{key:"vlogs",get:function(){return this.logs.reverse()}},{key:"init",value:function(){this.currentLayer&&this.layers.forEach((function(t){var img=t.ctx.getImageData(0,0,512,512);t.ctx.putImageData(img,0,0)}))}},{key:"renderCanvas",value:function(){var t=this;this.canvasElCtx.globalCompositeOperation="source-over",this.canvasElCtx.clearRect(0,0,this.width,this.height),this.layers.forEach((function(e){t.canvasElCtx.globalAlpha=e.opacity,t.canvasElCtx.drawImage(e.canvas,0,0)}))}},{key:"mounted",value:function(){var t=this;this.canvasElCtx=this.canvasEl.getContext("2d"),this.clear();var e=this.$el;e.addEventListener("mousedown",this.start),e.addEventListener("touchstart",this.start,{passive:!1}),e.addEventListener("mousemove",this.move),e.addEventListener("touchmove",this.move,{passive:!1}),e.addEventListener("mouseup",this.end),e.addEventListener("touchend",this.end,{passive:!1}),this.resize(),this.init(),this.layers.length,this.$nextTick((function(){return t.init()})),this.renderCanvas()}},{key:"clear",value:function(){this.ctx&&(this.ctx.fillStyle="#ffffff",this.ctx.fillRect(0,0,this.width,this.height))}},{key:"resize",value:function(){if(this.canvasEl){var rect=this.canvasEl.getBoundingClientRect();this.pageTop=rect.top,this.pageLeft=rect.left}}},{key:"drawOnCanvas",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.ctx){this.ctx.strokeStyle=this.pencil.color.toHex(),this.ctx.fillStyle=this.pencil.color.toHex(),this.ctx.globalCompositeOperation="source-over",this.tool==w.Eraser&&(this.ctx.globalCompositeOperation="destination-out");var n=this.pencil;if(this.tool==w.Eraser&&(n=this.eraser),this.ctx.lineWidth=0,null==this.prevPoint){var p=t;this.ctx.beginPath();var o=n.size*p.z;this.ctx.arc(p.x,p.y,o/2,0,2*Math.PI,!1),this.ctx.fill(),this.ctx.stroke()}else for(var r=this.prevPoint,c=t,l=x(c,r),a=k(c,r),i=0;i<l;i+=.5){var h=i/l;h<=.1&&(h=0),h>=1&&(h=1),c.z<.1&&(c.z=.1);var f=function(a,b,t){return a*(1-t)+b*t},d=n.size*f(1,r.z,n.pressureSizeWeight),v=n.size*f(1,c.z,n.pressureSizeWeight),y=f(v,d,h);this.ctx.globalAlpha=n.opacity*f(1,c.z,n.pressureOpacityWeight),this.ctx.beginPath(),this.ctx.arc(c.x+Math.sin(a)*i,c.y+Math.cos(a)*i,y/2,0,2*Math.PI,!1),this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke()}this.stroke.push(t),this.prevPoint=t,e||this.renderCanvas()}}},{key:"handle",value:function(t){if(t instanceof TouchEvent&&2==t.touches.length){if(!this.doneFP)return this.doneFP=!0,this.prevD=Number.NaN,void(this.pinching=!0);var a=t.touches[0],b=t.touches[1],e={x:a.pageX,y:a.pageY},n={x:b.pageX,y:b.pageY},o={x:(e.x+n.x)/2,y:(e.y+n.y)/2},r={x:o.x-this.pageLeft,y:o.y-this.pageTop};r.x/=this.width*this.scale,r.y/=this.height*this.scale;var c=Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2));if(!isNaN(this.prevD)){var l=c/this.prevD;this.zoom(l,r)}this.resize(),this.prevD=c}}},{key:"zoom",value:function(t,e){var n=this.scale;this.scale*=t;var o=-this.scale+n;this.pos.x+=this.width*e.x*o,this.pos.y+=this.height*e.y*o}},{key:"start",value:function(t){if(t instanceof TouchEvent&&t.touches.length>0&&(this.base.x=t.touches[0].pageX,this.base.y=t.touches[0].pageY),this.doneFP=!1,this.isMousedown=!0,!this.isFingerTouch(t)){var p=m(this.canvasEl,this.scale,t);this.flipH&&(p.x=this.width-p.x),this.drawOnCanvas(p)}t instanceof TouchEvent&&(this.prevTouchList=t.touches),this.renderCanvas(),t.preventDefault()}},{key:"move",value:function(t){var e;if(t instanceof TouchEvent&&t.touches[0]&&"stylus"!=t.touches[0].touchType&&(1==t.touches.length&&1==(null===(e=this.prevTouchList)||void 0===e?void 0:e.length)&&(this.pos.x+=t.touches[0].pageX-this.base.x,this.pos.y+=t.touches[0].pageY-this.base.y,this.base.x=t.touches[0].pageX,this.base.y=t.touches[0].pageY,this.resize()),1==t.touches.length&&(this.base.x=t.touches[0].pageX,this.base.y=t.touches[0].pageY)),this.handle(t),this.isMousedown){if(!this.isFingerTouch(t)){var p=m(this.canvasEl,this.scale,t);this.flipH&&(p.x=this.width-p.x),t instanceof TouchEvent&&(this.prevTouchList=t.touches),this.drawOnCanvas(p)}t.preventDefault()}}},{key:"isFingerTouch",value:function(t){return t instanceof TouchEvent&&t.touches.length>0&&"stylus"!=t.touches[0].touchType}},{key:"end",value:function(t){var e=this;if(this.handle(t),this.pinching=!1,!(this.prevTouchList&&this.prevTouchList.length>0&&"direct"==this.prevTouchList[0].touchType)&&this.stroke.length>0){if(!this.currentLayer)return;this.history.push({layer:this.currentLayer,stroke:this.stroke}),this.$store.commit("setRedo",!1),L.main.clearRedo();L.main.push((function t(){e.layers.forEach((function(t){return t.ctx.clearRect(0,0,e.width,e.height)}));var n=e.history.splice(e.history.length-1,1);e.drawStrokes(e.history),L.main.pushRedo((function(){n.length>0&&(e.layers.forEach((function(t){return t.ctx.clearRect(0,0,e.width,e.height)})),e.history.push(n[0]),e.drawStrokes(e.history),L.main.push(t),e.$store.commit("setUndo",!0))})),e.$store.commit("setRedo",!0)})),this.$store.commit("setUndo",!0)}this.stroke=[],this.prevPoint=null,this.isMousedown=!1,this.renderCanvas(),t.preventDefault()}},{key:"drawStrokes",value:function(t){if(this.currentLayer){for(var i=0;i<t.length;i++){var e=t[i];this.tempCtx=e.layer.ctx,this.prevPoint=null;for(var n=0;n<e.stroke.length;n++){var o=e.stroke[n];this.drawOnCanvas(o,!0)}this.stroke=[],this.prevPoint=null}this.renderCanvas(),this.tempCtx=null}}}]),n}(d.a);D([Object(v.b)({default:function(){return new S}})],B.prototype,"pencil",void 0),D([Object(v.b)({default:function(){return new E}})],B.prototype,"eraser",void 0),D([Object(v.b)({default:w.Pencil})],B.prototype,"tool",void 0),D([Object(v.b)({default:function(){return[]}})],B.prototype,"layers",void 0),D([Object(v.b)({default:null})],B.prototype,"currentLayer",void 0),D([Object(v.b)({default:!1})],B.prototype,"flipH",void 0),D([Object(v.b)()],B.prototype,"project",void 0),D([Object(v.d)()],B.prototype,"canvasEl",void 0),D([Object(v.f)("currentLayer")],B.prototype,"init",null),D([Object(v.f)("layers")],B.prototype,"renderCanvas",null);var z=B=D([Object(v.a)({components:{}})],B),T=(n(257),n(37)),$=Object(T.a)(z,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{height:"100vh"}},[n("div",{staticClass:"alpha-background",style:t.style},[n("canvas",{ref:"canvasEl",attrs:{width:t.width,height:t.height}})]),t._v(" "),n("div",{staticClass:"log"},t._l(t.vlogs,(function(e,i){return n("div",{key:i},[t._v(t._s(e))])})),0)])}),[],!1,null,"6eb24336",null).exports;function M(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Object(h.a)(t);if(e){var r=Object(h.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(l.a)(this,n)}}var H=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},W=function(t){Object(c.a)(n,t);var e=M(n);function n(){var t;return Object(o.a)(this,n),(t=e.apply(this,arguments)).isOpenSettings=!1,t.width=0,t.height=0,t.name="",t}return Object(r.a)(n,[{key:"open",value:function(){this.isOpenSettings=!0,this.width=this.project.width,this.height=this.project.height,this.name=this.project.name}},{key:"close",value:function(){this.isOpenSettings=!1}},{key:"save",value:function(){this.project.width=this.width,this.project.height=this.height,this.project.name=this.name,this.project.resize(),this.isOpenSettings=!1}}]),n}(d.a);H([Object(v.c)("projectSync")],W.prototype,"project",void 0);var F=W=H([Object(v.a)({})],W),I=Object(T.a)(F,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("sp-dialog",{attrs:{isOpen:t.isOpenSettings,header:"Settings"},on:{close:function(e){t.isOpenSettings=!1}},scopedSlots:t._u([{key:"footer",fn:function(){return[n("sp-button-group",{attrs:{dialog:!0}},[n("sp-button",{attrs:{type:"primary",group:!0},on:{click:t.close}},[t._v("\n        Cancel\n      ")]),t._v(" "),n("sp-button",{attrs:{group:!0},on:{click:t.save}},[t._v("Save")])],1)]},proxy:!0}])},[n("sp-textfield",{model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" "),n("div",{staticStyle:{display:"flex",width:"256px"}},[n("div",{staticStyle:{width:"auto"}},[n("sp-field-label",[t._v("Width")]),t._v(" "),n("sp-textfield",{staticStyle:{width:"auto"},model:{value:t.width,callback:function(e){t.width=e},expression:"width"}})],1),t._v(" "),n("div",{staticStyle:{width:"auto"}},[n("sp-field-label",[t._v("Height")]),t._v(" "),n("sp-textfield",{staticStyle:{width:"auto"},model:{value:t.height,callback:function(e){t.height=e},expression:"height"}})],1)])],1)}),[],!1,null,null,null).exports,U=n(9),A=(n(48),n(50),n(71),n(241));function N(t){return X.apply(this,arguments)}function X(){return(X=Object(U.a)(regeneratorRuntime.mark((function t(e){var n,o,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(o=new P).name=e.name.replace(/\.psd$/,""),t.t0=A.readPsd,t.next=5,e.arrayBuffer();case 5:return t.t1=t.sent,(r=(0,t.t0)(t.t1)).imageResources={},null===(n=r.children)||void 0===n||n.forEach((function(t){if(t.canvas){var e=new _;e.name=t.name||"",e.canvas=t.canvas,e.ctx=t.canvas.getContext("2d"),o.root.children.push(e)}})),t.abrupt("return",o);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Y(t){var canvas=document.createElement("canvas");canvas.width=t.width,canvas.height=t.height;var e=canvas.getContext("2d");return e.globalCompositeOperation="source-over",e.clearRect(0,0,t.width,t.height),t.root.children.forEach((function(t){e.globalAlpha=t.opacity,e.drawImage(t.canvas,0,0)})),canvas}function J(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Object(h.a)(t);if(e){var r=Object(h.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(l.a)(this,n)}}var G=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},K=function(t){Object(c.a)(h,t);var e,n,l=J(h);function h(){var t;return Object(o.a)(this,h),(t=l.apply(this,arguments)).isOpen=!1,t.dragOver=!1,t.errorMessage="Error",t}return Object(r.a)(h,[{key:"open",value:function(){this.isOpen=!0}},{key:"openFile",value:function(){this.input.click()}},{key:"error",value:function(t){this.errorMessage=t,this.toast.open(3e3)}},{key:"changeFile",value:(n=Object(U.a)(regeneratorRuntime.mark((function t(e){var n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.target).files||1!=n.files.length){t.next=18;break}if(t.prev=2,"image/vnd.adobe.photoshop"==(o=n.files[0]).type){t.next=7;break}return this.error("Unsuppoted file type ".concat(o.type)),t.abrupt("return");case 7:return t.next=9,N(o);case 9:this.project=t.sent,this.isOpen=!1,t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2),this.error("Unexpected Error");case 16:t.next=19;break;case 18:this.error("Support only single file.");case 19:case"end":return t.stop()}}),t,this,[[2,13]])}))),function(t){return n.apply(this,arguments)})},{key:"dragover",value:function(t){this.dragOver=!0,t.preventDefault()}},{key:"dragleave",value:function(){this.dragOver=!1}},{key:"close",value:function(){this.isOpen=!1}},{key:"drop",value:(e=Object(U.a)(regeneratorRuntime.mark((function t(e){var n,o,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),!(o=null===(n=e.dataTransfer)||void 0===n?void 0:n.files)||1!=o.length){t.next=10;break}return r=o[0],t.next=6,N(r);case 6:this.project=t.sent,this.isOpen=!1,t.next=11;break;case 10:this.error("Support only single file.");case 11:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),h}(d.a);G([Object(v.c)("projectSync")],K.prototype,"project",void 0),G([Object(v.d)()],K.prototype,"input",void 0),G([Object(v.d)()],K.prototype,"toast",void 0);var Q=K=G([Object(v.a)({})],K),V=Object(T.a)(Q,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("sp-dialog",{attrs:{dismissable:!0,isOpen:t.isOpen,header:"Open PSD File"},on:{close:function(e){t.isOpen=!1}}},[n("div",{on:{drop:t.drop,dragover:t.dragover,dragleave:t.dragleave}},[n("sp-dropzone",{attrs:{dragged:t.dragOver}},[n("sp-button",{staticStyle:{"margin-top":"32px"},attrs:{type:"primary"},on:{click:t.openFile}},[t._v("\n        Select a File\n        "),n("input",{ref:"input",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:t.changeFile}})])],1)],1),t._v(" "),n("sp-toast",{ref:"toast",attrs:{negative:!0}},[t._v("\n    "+t._s(t.errorMessage)+"\n  ")])],1)}),[],!1,null,null,null).exports;n(43),n(269),n(22),n(271),n(277),n(279),n(280),n(281),n(284),n(285),n(286),n(287),n(288),n(289),n(290),n(291),n(293),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(305),n(306),n(307),n(35),n(44),n(172);function Z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Object(h.a)(t);if(e){var r=Object(h.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(l.a)(this,n)}}var tt=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},et=function(t){Object(c.a)(n,t);var e=Z(n);function n(){var t;return Object(o.a)(this,n),(t=e.apply(this,arguments)).isOpen=!1,t}return Object(r.a)(n,[{key:"open",value:function(){this.isOpen=!0}},{key:"close",value:function(){this.isOpen=!1}},{key:"download",value:function(){var t,e,link,n={width:this.project.width,height:this.project.height,children:this.project.root.children.map((function(t){return{name:t.name,opacity:t.opacity,canvas:t.canvas}})),canvas:Y(this.project)},o=Object(A.writePsd)(n);t=new Blob([new Uint8Array(o)]),e=this.project.name+".psd",(link=document.createElement("a")).href&&URL.revokeObjectURL(link.href),link.href=URL.createObjectURL(t),link.download=e,link.dispatchEvent(new MouseEvent("click"))}}]),n}(d.a);tt([Object(v.b)()],et.prototype,"project",void 0);var nt=et=tt([Object(v.a)({})],et),ot=Object(T.a)(nt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("sp-dialog",{attrs:{dismissable:!0,isOpen:t.isOpen,header:"Download PSD File"},on:{close:function(e){t.isOpen=!1}}},[n("sp-button",{on:{click:t.download}},[t._v("Download")])],1)}),[],!1,null,null,null).exports;function it(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Object(h.a)(t);if(e){var r=Object(h.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(l.a)(this,n)}}var ct=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},at=function(t){Object(c.a)(n,t);var e=it(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(r.a)(n,[{key:"openSettingsDialog",value:function(){this.settingsDialog.open()}},{key:"openExportDialog",value:function(){this.exportDialog.open()}},{key:"openImportDialog",value:function(){this.importDialog.open()}}]),n}(d.a);ct([Object(v.c)("projectSync")],at.prototype,"project",void 0),ct([Object(v.d)()],at.prototype,"settingsDialog",void 0),ct([Object(v.d)()],at.prototype,"importDialog",void 0),ct([Object(v.d)()],at.prototype,"exportDialog",void 0);var st=at=ct([Object(v.a)({components:{SettingsDialog:I,ImportDialog:V,ExportDialog:ot}})],at),lt=Object(T.a)(st,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("sp-split-view-pane",{staticStyle:{display:"flex"}},[n("sp-action-button",{attrs:{item:!0,quiet:!0,projectSync:t.project},on:{"update:projectSync":function(e){t.project=e},"update:project-sync":function(e){t.project=e},click:t.openImportDialog}},[n("sp-icon",{attrs:{name:"Import"}})],1),t._v(" "),n("div",{staticStyle:{margin:"auto"}}),t._v(" "),n("sp-action-button",{attrs:{item:!0,quiet:!0},on:{click:t.openExportDialog}},[n("sp-icon",{attrs:{name:"Export"}})],1),t._v(" "),n("sp-action-button",{attrs:{item:!0,quiet:!0},on:{click:t.openSettingsDialog}},[n("sp-icon",{attrs:{name:"Settings"}})],1),t._v(" "),n("settings-dialog",{ref:"settingsDialog",attrs:{projectSync:t.project},on:{"update:projectSync":function(e){t.project=e},"update:project-sync":function(e){t.project=e}}}),t._v(" "),n("import-dialog",{ref:"importDialog",attrs:{projectSync:t.project},on:{"update:projectSync":function(e){t.project=e},"update:project-sync":function(e){t.project=e}}}),t._v(" "),n("export-dialog",{ref:"exportDialog",attrs:{project:t.project}})],1)}),[],!1,null,null,null).exports;function ut(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Object(h.a)(t);if(e){var r=Object(h.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(l.a)(this,n)}}var pt=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},ht=function(t){Object(c.a)(n,t);var e=ut(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return n}(d.a);pt([Object(v.b)({default:""})],ht.prototype,"name",void 0);var ft=ht=pt([Object(v.a)({})],ht),vt=Object(T.a)(ft,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("sp-action-button",t._g(t._b({staticStyle:{margin:"0"},attrs:{item:!0,quiet:!0,size:"S"}},"sp-action-button",t.$attrs,!1),t.$listeners),[n("sp-icon",{attrs:{name:t.name}})],1)}),[],!1,null,null,null).exports;function yt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Object(h.a)(t);if(e){var r=Object(h.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(l.a)(this,n)}}var bt=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},gt=function(t){Object(c.a)(n,t);var e=yt(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(r.a)(n,[{key:"changeFlipH",value:function(){this.flipH=!this.flipH}},{key:"canUndo",get:function(){return this.$store.state.canUndo}},{key:"canRedo",get:function(){return this.$store.state.canRedo}},{key:"undo",value:function(){this.canUndo&&L.main.undo(),this.$store.commit("setUndo",L.main.undoLength>0)}},{key:"redo",value:function(){this.canRedo&&L.main.redo(),this.$store.commit("setRedo",L.main.redoLength>0)}}]),n}(d.a);bt([Object(v.c)("flipHSync")],gt.prototype,"flipH",void 0);var jt=gt=bt([Object(v.a)({components:{AppActionBarIconButton:vt}})],gt),Ot=Object(T.a)(jt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("sp-split-view-pane",[n("div",{staticStyle:{display:"flex",height:"32px"}},[n("sp-action-group",{staticStyle:{margin:"auto",height:"24px"},attrs:{quiet:!0}},[n("app-action-bar-icon-button",{attrs:{disabled:!t.canUndo,name:"Undo"},on:{click:t.undo}}),t._v(" "),n("app-action-bar-icon-button",{attrs:{disabled:!t.canRedo,name:"Redo"},on:{click:t.redo}}),t._v(" "),n("app-action-bar-icon-button",{attrs:{selected:t.flipH,name:"FlipHorizontal"},on:{click:t.changeFlipH}})],1)],1)])}),[],!1,null,null,null).exports;n(308);function mt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Object(h.a)(t);if(e){var r=Object(h.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(l.a)(this,n)}}var xt=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},kt=function(t){Object(c.a)(n,t);var e=mt(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(r.a)(n,[{key:"selectLayer",value:function(t){this.selectedLayer=t}},{key:"updateEmit",value:function(){this.$emit("update")}},{key:"deleteLayer",value:function(){var t=this,i=this.project.root.children.findIndex((function(e){return e==t.selectedLayer}));-1!=i&&(this.project.root.children.splice(i,1),this.project.root.children.length>0?this.selectedLayer=this.project.root.children[0]:this.selectedLayer=null)}},{key:"addLayer",value:function(){var t=new _;t.init(),t.canvas.width=this.project.width,t.canvas.height=this.project.height,this.project.root.children.push(t),null==this.selectedLayer&&this.project.root.children.length>0&&(this.selectedLayer=this.project.root.children[0])}},{key:"move",value:function(p){var i=p.i,t=this.project.root.children;if(t[i]!=p.item){var e=t.findIndex((function(t){return t==p.item}));-1!=e&&t.splice(e,1);var n=-1;e>i&&(n=0),t.splice(i+n,0,p.item)}}}]),n}(d.a);xt([Object(v.b)()],kt.prototype,"treeWidth",void 0),xt([Object(v.c)("projectSync")],kt.prototype,"project",void 0),xt([Object(v.c)("selectedLayerS")],kt.prototype,"selectedLayer",void 0);var wt=kt=xt([Object(v.a)({})],kt),Rt=Object(T.a)(wt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("sp-split-view-pane",{staticClass:"prevent-touchmove",style:"width: "+t.treeWidth+"px; min-width: "+t.treeWidth+"px; max-width: "+t.treeWidth+"px"},[n("sp-action-group",{attrs:{compact:!0,quiet:!0}},[n("sp-action-button",{attrs:{item:!0,quiet:!0},on:{click:t.addLayer}},[n("sp-icon",{attrs:{name:"Add"}})],1),t._v(" "),n("sp-action-button",{attrs:{item:!0,quiet:!0},on:{click:t.deleteLayer}},[n("sp-icon",{attrs:{name:"Delete"}})],1)],1),t._v(" "),n("sp-divider",{staticStyle:{margin:"0"}}),t._v(" "),t.selectedLayer?[n("sp-textfield",{staticStyle:{width:"calc(100% - 8px)",margin:"4px"},attrs:{size:"S"},model:{value:t.selectedLayer.name,callback:function(e){t.$set(t.selectedLayer,"name",e)},expression:"selectedLayer.name"}}),t._v(" "),n("sp-slider",{staticStyle:{margin:"0 8px"},attrs:{min:0,max:1,label:"Opacity",valueText:t.selectedLayer.opacity.toFixed(2)},on:{input:t.updateEmit},model:{value:t.selectedLayer.opacity,callback:function(e){t.$set(t.selectedLayer,"opacity",e)},expression:"selectedLayer.opacity"}})]:t._e(),t._v(" "),n("sp-divider",{staticStyle:{margin:"0"}}),t._v(" "),n("sp-item-list-item",{attrs:{selectedItem:t.selectedLayer,thumbnail:!0,items:t.project.root.children},on:{pointerdown:t.selectLayer,move:t.move},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.item;return[n("div",{staticStyle:{padding:"2px 0 2px 0"}},[t._v("\n        "+t._s(o.name)+"\n      ")])]}}])})],2)}),[],!1,null,null,null).exports;function St(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Object(h.a)(t);if(e){var r=Object(h.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(l.a)(this,n)}}var _t=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},Pt=function(t){Object(c.a)(n,t);var e=St(n);function n(){var t;return Object(o.a)(this,n),(t=e.apply(this,arguments)).h=90,t}return Object(r.a)(n,[{key:"cssClass",get:function(){return[this.selected?"btn-select":""]}},{key:"rgbStr",get:function(){var t=this.color,e=t.r,g=t.g,b=t.b;return"rgb(".concat(e,", ").concat(g,", ").concat(b,")")}},{key:"open",value:function(t){this.selected&&this.popover.open(t.target)}},{key:"changeColor",value:function(t){this.color=t,this.$emit("change",t)}}]),n}(d.a);_t([Object(v.d)()],Pt.prototype,"popover",void 0),_t([Object(v.b)({default:!1})],Pt.prototype,"selected",void 0),_t([Object(v.c)("colorSync")],Pt.prototype,"color",void 0);var Et=Pt=_t([Object(v.a)({})],Pt),Lt=(n(309),Object(T.a)(Et,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("button",t._g(t._b({staticClass:"btn",class:t.cssClass,style:"background: "+t.rgbStr,on:{pointerdown:t.open}},"button",t.$attrs,!1),t.$listeners)),t._v(" "),n("sp-popover",{ref:"popover"},[n("sp-color-area",{attrs:{h:t.h,color:t.color},on:{change:t.changeColor}}),t._v(" "),n("sp-color-slider",{attrs:{h:t.h},on:{change:function(e){return t.h=e}}})],1)],1)}),[],!1,null,"4c8cd7c6",null).exports);function Ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Object(h.a)(t);if(e){var r=Object(h.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(l.a)(this,n)}}var Dt=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},Bt=function(t){Object(c.a)(n,t);var e=Ct(n);function n(){var t;return Object(o.a)(this,n),(t=e.apply(this,arguments)).r=3,t}return Object(r.a)(n,[{key:"changeOpacity",value:function(t){this.ipencil.opacity=Math.pow(t,this.r)}},{key:"opacity",get:function(){return Math.pow(this.ipencil.opacity,1/this.r)}},{key:"open",value:function(t){this.popover.open(t)}}]),n}(d.a);Dt([Object(v.d)()],Bt.prototype,"popover",void 0),Dt([Object(v.c)("ipencilSync")],Bt.prototype,"ipencil",void 0),Dt([Object(v.b)()],Bt.prototype,"selected",void 0);var zt=Bt=Dt([Object(v.a)({})],Bt),Tt=Object(T.a)(zt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("sp-popover",{ref:"popover"},[n("div",{staticStyle:{height:"200px"}},[n("sp-slider",{attrs:{label:"size",value:t.ipencil.size,min:1,max:100,valueText:t.ipencil.size.toFixed(0)},on:{input:function(e){return t.ipencil.size=e}}}),t._v(" "),n("sp-slider",{attrs:{label:"opacity",value:t.opacity,valueText:t.opacity.toFixed(2),min:0,max:1},on:{input:t.changeOpacity}}),t._v(" "),n("sp-slider",{attrs:{label:"pressure size",value:t.ipencil.pressureSizeWeight,min:0,max:1,valueText:t.ipencil.pressureSizeWeight.toFixed(2)},on:{input:function(e){return t.ipencil.pressureSizeWeight=e}}}),t._v(" "),n("sp-slider",{attrs:{label:"pressure opacity",value:t.ipencil.pressureOpacityWeight,min:0,max:1,valueText:t.ipencil.pressureOpacityWeight.toFixed(2)},on:{input:function(e){return t.ipencil.pressureOpacityWeight=e}}})],1)])}),[],!1,null,null,null).exports;function $t(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Object(h.a)(t);if(e){var r=Object(h.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(l.a)(this,n)}}var Mt=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},Ht=function(t){Object(c.a)(n,t);var e=$t(n);function n(){var t;return Object(o.a)(this,n),(t=e.apply(this,arguments)).color1=new R.Color,t.color2=new R.Color,t.colorButtonIndex=0,t.selectedColor=1,t.Tool=w,t}return Object(r.a)(n,[{key:"mounted",value:function(){this.color2.r=255,this.color2.g=255,this.color2.b=255}},{key:"openPencilPop",value:function(){this.tool==w.Pencil&&this.pencilPopover.open(this.pencilButton.$el),this.tool=w.Pencil}},{key:"openEraserPop",value:function(){this.tool==w.Eraser&&this.eraserPopover.open(this.eraserButton.$el),this.tool=w.Eraser}},{key:"selectColor",value:function(t){this.colorButtonIndex=t,0==t?this.pencil.color=this.color1:1==t&&(this.pencil.color=this.color2)}},{key:"changeColor1",value:function(t){this.pencil.color=t}},{key:"changeColor2",value:function(t){this.pencil.color=t}}]),n}(d.a);Mt([Object(v.c)("projectSync")],Ht.prototype,"project",void 0),Mt([Object(v.c)("toolSync")],Ht.prototype,"tool",void 0),Mt([Object(v.c)("pencilSync")],Ht.prototype,"pencil",void 0),Mt([Object(v.c)("eraserSync")],Ht.prototype,"eraser",void 0),Mt([Object(v.d)()],Ht.prototype,"pencilPopover",void 0),Mt([Object(v.d)()],Ht.prototype,"eraserPopover",void 0),Mt([Object(v.d)()],Ht.prototype,"color1Button",void 0),Mt([Object(v.d)()],Ht.prototype,"color2Button",void 0),Mt([Object(v.d)()],Ht.prototype,"pencilButton",void 0),Mt([Object(v.d)()],Ht.prototype,"eraserButton",void 0);var Wt=Ht=Mt([Object(v.a)({components:{ColorButton:Lt,IPencilPopover:Tt}})],Ht),Ft=Object(T.a)(Wt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("sp-split-view-pane",{staticStyle:{padding:"4px"}},[n("sp-action-group",{attrs:{vertical:!0}},[n("sp-action-button",{ref:"pencilButton",attrs:{item:!0,quiet:!0,emphasized:t.tool==t.Tool.Pencil,selected:t.tool==t.Tool.Pencil,corner:!0},on:{pointerdown:t.openPencilPop}},[n("sp-icon",{attrs:{name:"Brush"}})],1),t._v(" "),n("sp-action-button",{ref:"eraserButton",attrs:{emphasized:t.tool==t.Tool.Eraser,selected:t.tool==t.Tool.Eraser,item:!0,quiet:!0,corner:!0},on:{pointerdown:t.openEraserPop}},[n("sp-icon",{attrs:{name:"Erase"}})],1),t._v(" "),n("sp-divider"),t._v(" "),n("color-button",{ref:"color1Button",attrs:{selected:0==t.colorButtonIndex,colorSync:t.color1},on:{"update:colorSync":function(e){t.color1=e},"update:color-sync":function(e){t.color1=e},change:t.changeColor1,pointerdown:function(e){return t.selectColor(0)}}}),t._v(" "),n("color-button",{ref:"color2Button",attrs:{selected:1==t.colorButtonIndex,colorSync:t.color2},on:{"update:colorSync":function(e){t.color2=e},"update:color-sync":function(e){t.color2=e},change:t.changeColor2,pointerdown:function(e){return t.selectColor(1)}}})],1),t._v(" "),n("i-pencil-popover",{ref:"pencilPopover",attrs:{ipencilSync:t.pencil,selected:t.tool==t.Tool.Pencil},on:{"update:ipencilSync":function(e){t.pencil=e},"update:ipencil-sync":function(e){t.pencil=e}}}),t._v(" "),n("i-pencil-popover",{ref:"eraserPopover",attrs:{ipencilSync:t.eraser,selected:t.tool==t.Tool.Eraser},on:{"update:ipencilSync":function(e){t.eraser=e},"update:ipencil-sync":function(e){t.eraser=e}}})],1)}),[],!1,null,null,null).exports;function It(t,e){return!!t.parentElement&&(t.tagName==e||It(t.parentElement,e))}function Ut(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Object(h.a)(t);if(e){var r=Object(h.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(l.a)(this,n)}}var qt=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},At=function(t){Object(c.a)(n,t);var e=Ut(n);function n(){var t;return Object(o.a)(this,n),(t=e.apply(this,arguments)).project=new P,t.tool=w.Pencil,t.Tool=w,t.treeWidth=200,t.selectedLayer=null,t.pencil=new S,t.eraser=new E,t.flipH=!1,t}return Object(r.a)(n,[{key:"clear",value:function(){this.canvas.clear()}},{key:"changeW",value:function(t){this.treeWidth-=t}},{key:"update",value:function(){this.canvas.renderCanvas()}},{key:"mounted",value:function(){j()("/static/spectrum-css-icons.svg",(function(){})),j()("/static/spectrum-icons.svg",(function(){})),this.project=new P;var t=new _;t.name="layer1",t.init(),this.project.root.children.push(t);var e=new _;e.name="layer2",e.init(),this.selectedLayer=e,this.project.root.children.push(e),this.project.resize(),document.body.addEventListener("touchmove",(function(t){It(t.target,"BUTTON")||t.preventDefault()}),{passive:!1})}}]),n}(d.a);qt([Object(v.d)()],At.prototype,"canvas",void 0);var Nt=At=qt([Object(v.a)({components:{MiraCanvas:$,AppHeader:lt,AppActionBar:Ot,LayerPanel:Rt,SideToolBar:Ft}})],At),Xt=(n(311),Object(T.a)(Nt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.project?n("div",{staticClass:"editor"},[n("sp-split-view",{attrs:{vertical:!0}},[n("app-header",{attrs:{projectSync:t.project},on:{"update:projectSync":function(e){t.project=e},"update:project-sync":function(e){t.project=e}}}),t._v(" "),n("sp-split-view-splitter"),t._v(" "),n("app-action-bar",{attrs:{flipHSync:t.flipH},on:{"update:flipHSync":function(e){t.flipH=e},"update:flip-h-sync":function(e){t.flipH=e}}}),t._v(" "),n("sp-split-view-splitter")],1),t._v(" "),n("sp-split-view",{staticStyle:{height:"calc(100vh - 68px)"}},[n("side-tool-bar",{attrs:{projectSync:t.project,toolSync:t.tool,pencilSync:t.pencil,eraserSync:t.eraser},on:{"update:projectSync":function(e){t.project=e},"update:project-sync":function(e){t.project=e},"update:toolSync":function(e){t.tool=e},"update:tool-sync":function(e){t.tool=e},"update:pencilSync":function(e){t.pencil=e},"update:pencil-sync":function(e){t.pencil=e},"update:eraserSync":function(e){t.eraser=e},"update:eraser-sync":function(e){t.eraser=e}}}),t._v(" "),n("sp-split-view-splitter",{staticStyle:{"min-width":"2px"}}),t._v(" "),n("sp-split-view-pane",{staticStyle:{overflow:"hidden",width:"10000px",height:"100%"}},[n("mira-canvas",{ref:"canvas",attrs:{pencil:t.pencil,tool:t.tool,eraser:t.eraser,currentLayer:t.selectedLayer,flipH:t.flipH,layers:t.project.root.children,project:t.project}})],1),t._v(" "),n("sp-split-view-splitter",{staticStyle:{"min-width":"2px"}}),t._v(" "),n("layer-panel",{attrs:{projectSync:t.project,selectedLayerS:t.selectedLayer,treeWidth:t.treeWidth},on:{"update:projectSync":function(e){t.project=e},"update:project-sync":function(e){t.project=e},"update:selectedLayerS":function(e){t.selectedLayer=e},"update:selected-layer-s":function(e){t.selectedLayer=e},update:t.update}})],1)],1):t._e()}),[],!1,null,null,null));e.default=Xt.exports}}]);